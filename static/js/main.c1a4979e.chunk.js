(window["webpackJsonppiglet-sim"]=window["webpackJsonppiglet-sim"]||[]).push([[0],[,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/Dice-0.e1a84b66.svg"},function(e,t,a){e.exports=a.p+"static/media/Dice-1.1192cb54.svg"},function(e,t,a){e.exports=a.p+"static/media/Dice-2-b.cb855bd3.svg"},function(e,t,a){e.exports=a.p+"static/media/Dice-3-b.6e06b439.svg"},function(e,t,a){e.exports=a.p+"static/media/Dice-4.5f9fb5bd.svg"},function(e,t,a){e.exports=a.p+"static/media/Dice-5-b.be6d963e.svg"},function(e,t,a){e.exports=a.p+"static/media/Dice-6-b.9b3f333a.svg"},,function(e,t,a){e.exports=a(27)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);a(18);var n=a(0),s=a.n(n),l=a(8),r=a.n(l),i=(a(23),a(1)),c=a(2),o=a(5),u=a(4),m=a(6);function h(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}var d=a(9),v=a.n(d),g=a(10),p=a.n(g),b=a(11),E=a.n(b),f=a(12),k=a.n(f),y=a(13),w=a.n(y),S=a(14),N=a.n(S),O=a(15),x=a.n(O);var C=function(e){var t=e.size||64,a=[v.a,p.a,E.a,k.a,w.a,N.a,x.a],n=e.value;return s.a.createElement("img",{src:a[n],alt:"Dice ".concat(n),style:{width:t}})},A=a(3),W=a.n(A);function j(e){var t=e.value,a=e.inProgress,n=e.gameOver,l=e.hasWon,r=e.winSum,i=!l&&n?0:r,c=t>1,o=c?"+".concat(t):"-".concat(r-1),u=W()({"ps-dice-addition":!0,"is-invisible":!a,"has-text-success":c,"has-text-danger":!c});return s.a.createElement("div",{className:"ps-container ps-space-evenly has-text-centered"},s.a.createElement("div",null,s.a.createElement("h3",{className:u},o),s.a.createElement("div",{onClick:e.onRoll},s.a.createElement(C,{value:t}))),s.a.createElement("div",null,s.a.createElement("h3",{className:"is-size-5 has-text-weight-semibold"},"Winnings"),s.a.createElement("p",{className:"ps-win-amount",style:{color:i?"#f1c000":"#A7A7A8"}},"$",i)))}function P(e){var t=e.history,a=e.winSum,n=e.hasWon,l=e.gameOver,r=l?t.length-1:t.length,i=W()({"is-hidden":!n}),c=W()({"is-hidden":!l});return s.a.createElement("div",{className:"ps-streak-container has-text-centered"},s.a.createElement("p",{className:i},"Congrats! ",s.a.createElement("span",{roll:"img","aria-label":"confetti ball"},"\ud83c\udf8a"),"\xa0 You've won ",s.a.createElement("span",{roll:"img","aria-label":"Money bag"},"\ud83d\udcb0"),a),s.a.createElement("p",{className:c},"Oh no! ",s.a.createElement("span",{roll:"img","aria-label":"see-no-evil monkey"},"\ud83d\ude48"),"\xa0",s.a.createElement("br",null),"You've lost the potential ",s.a.createElement("span",{className:"has-text-danger"},"$",a-1)," winnings."),s.a.createElement("p",null,"Streak: ",r),s.a.createElement("div",{className:"ps-sm-dice-container"},t.map(function(e,t){return s.a.createElement("span",{key:t,className:"ps-small-dice"},s.a.createElement(C,{value:e,size:24}))})))}function R(e){var t=e.gameOver,a=e.inProgress,n=e.hasWon;return s.a.createElement("div",{className:"ps-container ps-center ps-action-bar"},s.a.createElement("div",{className:"buttons ps-buttons-box"},s.a.createElement("button",{className:"button is-success",disabled:t||n,onClick:e.onRoll},s.a.createElement("span",{roll:"img","aria-label":"Dice"},"\ud83c\udfb2"),"\xa0Roll"),s.a.createElement("button",{className:"button is-warning",disabled:t||n||!a,onClick:e.onTakeHome},s.a.createElement("span",{roll:"img","aria-label":"Money bag"},"\ud83d\udcb0"),"\xa0Take Home"),s.a.createElement("button",{className:"button is-light",disabled:!a,onClick:e.onNew},s.a.createElement("span",{roll:"img","aria-label":"Restart"},"\ud83d\udd04"),"\xa0New")))}a(24);var V={round:0,history:[],diceValue:4,takeHome:!1},B=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleRoll=function(){if(a.isGameOver())console.info("The game is over! Please start over.");else{var e=a.rollDice(),t=a.state.history.concat([e]);a.setState({round:a.state.round+1,history:t,diceValue:e})}},a.handleNew=function(){a.newGame()},a.handleTakeHome=function(){a.setState({takeHome:!0})},a.state=V,a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"newGame",value:function(){this.setState(V)}},{key:"isGameOver",value:function(){var e=this.state,t=e.round,a=e.diceValue;return t>0&&1===a}},{key:"inProgress",value:function(){return this.state.round>0}},{key:"hasWon",value:function(){return this.state.takeHome}},{key:"rollDice",value:function(){return h(1,6)}},{key:"render",value:function(){var e=this.state,t=e.history,a=e.diceValue,n=this.isGameOver(),l=this.inProgress(),r=this.hasWon(),i=t.reduce(function(e,t){return e+t},0);return s.a.createElement("div",null,s.a.createElement(j,{onRoll:this.handleRoll,value:a,inProgress:l,hasWon:r,gameOver:n,winSum:i}),s.a.createElement(P,{winSum:i,hasWon:r,gameOver:n,history:t}),s.a.createElement(R,{gameOver:n,inProgress:l,hasWon:r,onRoll:this.handleRoll,onTakeHome:this.handleTakeHome,onNew:this.handleNew}),s.a.createElement("div",{className:"ps-action-bar-padding"}))}}]),t}(n.Component),_=a(16);var T=function(e){var t=e.running,a=e.paused,n=e.completed,l=t||a,r=s.a.createElement("button",{className:"button is-danger",onClick:e.onStop,disabled:!l},s.a.createElement("span",{roll:"img","aria-label":"Stop"},"\u23f9"),"\xa0 Stop"),i=s.a.createElement("button",{className:"button is-light",onClick:e.onNew},s.a.createElement("span",{roll:"img","aria-label":"Renew"},"\ud83d\udd04"),"\xa0 New"),c=W()({button:!0,"is-primary":!t,"is-warning":t&&!n});return s.a.createElement("div",{className:"ps-container ps-center ps-action-bar"},s.a.createElement("div",{className:"buttons ps-buttons-box"},s.a.createElement("button",{className:c,onClick:e.onPlay,disabled:n},"Run \xa0",s.a.createElement("span",{roll:"img","aria-label":"Play or pause"},"\u23ef"),"\xa0 Pause"),n?i:r))};var H=function(e){var t=e.simAmount,a=e.activeStrat,n=e.stratAVal,l=e.stratBVal,r=e.onSelectChange,i=e.onRadioChange,c=e.onValueChange;return s.a.createElement("form",{className:"ps-sim-form"},s.a.createElement("div",{className:"ps-inline-field ps-strat-field"},s.a.createElement("label",{className:"ps-inline-label"},"Simulate"),s.a.createElement("div",{className:"select"},s.a.createElement("select",{value:t,onChange:r},[{n:100,text:"100"},{n:1e3,text:"1k"},{n:1e4,text:"10k"}].map(function(e,t){return s.a.createElement("option",{key:t,value:e.n},"".concat(e.text," times"))})))),s.a.createElement("div",{className:"ps-strat-field"},s.a.createElement("div",{className:"ps-inline-field"},s.a.createElement("label",{className:"ps-inline-label"},s.a.createElement("input",{type:"radio",className:"ps-strat-radio",onChange:i,name:"Strategy A",value:"stratA",checked:"stratA"===a}),"Strategy A"),s.a.createElement("input",{name:"stratA",value:n,onChange:c,className:"input ps-strat-input"})),s.a.createElement("p",{className:"ps-strat-desc"},"Quit after tentative winnings are $",n," or greater.")),s.a.createElement("div",{className:"ps-strat-field"},s.a.createElement("div",{className:"ps-inline-field"},s.a.createElement("label",{className:"ps-inline-label"},s.a.createElement("input",{type:"radio",className:"ps-strat-radio",onChange:i,name:"Strategy B",value:"stratB",checked:"stratB"===a}),"Strategy B"),s.a.createElement("input",{name:"stratB",value:l,onChange:c,className:"input ps-strat-input"})),s.a.createElement("p",{className:"ps-strat-desc"},"Quit after ",l," successful rolls.")))};var I=function(e){var t,a,n=e.activeStrat,l=e.stratValue,r=e.completed,i=e.avgStreak,c=e.avgWinnings,o=e.bestStreak,u=e.bestWinnings;r&&(t=i.toFixed(2),a=c.toFixed(2));var m={stratA:s.a.createElement("p",null,"Quit after tentative winnings are $",l," or greater."),stratB:s.a.createElement("p",null,"Quit after ",l," successful rolls.")};return s.a.createElement("div",null,s.a.createElement("div",{className:"ps-container ps-center"},s.a.createElement("table",{className:"table is-bordered"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{className:"has-text-info"},"Result"),s.a.createElement("th",null,"Streak"),s.a.createElement("th",null,"Winnings"))),s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Avg."),s.a.createElement("td",null,t),s.a.createElement("td",null,"$",a)),s.a.createElement("tr",null,s.a.createElement("th",null,"Best"),s.a.createElement("td",null,o),s.a.createElement("td",null,"$",u))))),s.a.createElement("br",null),s.a.createElement("h3",{className:"is-size-5 has-text-weight-semibold"},"Chosen Strategy"),m[n])},D=function(){function e(){Object(i.a)(this,e),this.money_bag=0,this.round=0,this.winningStreak=0,this.over=!1}return Object(c.a)(e,[{key:"roll",value:function(){if(this.over)throw new Error("Cannot roll when the game is already over.");this.round++;var e=h(1,6);e>1?(this.winningStreak++,this.money_bag+=e):(this.money_bag=0,this.over=!0)}},{key:"takeHome",value:function(){if(this.over)throw new Error("Cannot takeHome when the game is already over.");this.over=!0}},{key:"result",get:function(){return{streak:this.winningStreak,winnings:this.money_bag}}}]),e}(),M=function(){function e(t){Object(i.a)(this,e),this.count=t}return Object(c.a)(e,[{key:"play",value:function(){for(var e=new D;!e.over;){if(e.round>=this.count){e.takeHome();break}e.roll()}return this.result=e.result,this}}]),e}(),G=function(){function e(t){Object(i.a)(this,e),this.amount=t}return Object(c.a)(e,[{key:"play",value:function(){for(var e=new D;!e.over;){if(e.money_bag>=this.amount){e.takeHome();break}e.roll()}return this.result=e.result,this}}]),e}(),U=function(){function e(t,a,n){Object(i.a)(this,e),this.simAmount=t,this.strategy=a,this.onUpdate=n,this.reset()}return Object(c.a)(e,[{key:"run",value:function(){var e=this;this.timer=setInterval(function(){++e.counter<=e.simAmount?e._runUpdate():e._runComplete()})}},{key:"_runUpdate",value:function(){var e=this.strategy.play().result,t=e.winnings,a=e.streak;this.totalWinnings+=t,this.totalStreaks+=a,this._setBestResults(t,a),this.onUpdate(this.counter,this.result.best)}},{key:"_runComplete",value:function(){clearInterval(this.timer);var e=this.totalWinnings/this.counter,t=this.totalStreaks/this.counter;this._setAvgResults(e,t),this.onUpdate(this.counter,this.result.best,this.result.avg,!0)}},{key:"pause",value:function(){clearInterval(this.timer)}},{key:"stop",value:function(){clearInterval(this.timer),this.reset()}},{key:"_setAvgResults",value:function(e,t){this.result.avg={streak:t,winnings:e}}},{key:"_setBestResults",value:function(e,t){var a=this.result.best;a.winnings=Math.max(a.winnings,e),a.streak=Math.max(a.streak,t)}},{key:"reset",value:function(){this.counter=0,this.totalWinnings=0,this.totalStreaks=0,this.result={avg:{streak:null,winnings:null},best:{streak:null,winnings:null}}}}]),e}();a(25);function $(e){var t=e.completed,a=W()({progress:!0,"is-info":!t,"is-success":t});return s.a.createElement("div",{className:"columns is-centered"},s.a.createElement("div",{className:"column is-two-thirds"},s.a.createElement("progress",{className:a,value:e.value,max:"100"},"45%")))}var z=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).onSimUpdate=function(e,t,n,s){var l=e/a.state.simAmount*100;a.setState({progressValue:l,bestStreak:t.streak,bestWinnings:t.winnings}),s&&a.setState({avgStreak:n.streak,avgWinnings:n.winnings,running:!1,completed:!0})},a.handlePlayPause=function(){if(!a.simulation){var e=a.state,t=e.activeStrat,n=e.simAmount,s=new(0,a.strategyOptions[t])(a.state[t].value);a.simulation=new U(n,s,a.onSimUpdate)}a.state.running?(a.simulation.pause(),a.setState({running:!1,paused:!0})):(a.simulation.run(),a.setState({running:!0,paused:!1}))},a.handleStop=function(){a.simulation&&(a.simulation.stop(),a._setNewSim())},a.handleNew=function(){a._setNewSim()},a.handleAmountSelect=function(e){a.setState({simAmount:e.target.value})},a.handleStratSelect=function(e){a.setState({activeStrat:e.target.value})},a.handleStratValChange=function(e){var t=e.target,n=t.name,s=t.value,l=Math.floor(Math.abs(s));a.setState(Object(_.a)({},n,{value:l}))},a.strategyOptions={stratA:G,stratB:M},a.state={simAmount:100,activeStrat:"stratA",stratA:{value:10},stratB:{value:5},running:!1,paused:!1,completed:!1,progressValue:0},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"_setNewSim",value:function(){this.simulation=null,this.setState({running:!1,paused:!1,completed:!1,progressValue:0})}},{key:"render",value:function(){var e=this.state,t=e.simAmount,a=e.activeStrat,n=e.stratA,l=e.stratB,r=e.running,i=e.paused,c=e.completed,o=e.progressValue,u=e.avgStreak,m=e.avgWinnings,h=e.bestStreak,d=e.bestWinnings,v=s.a.createElement(H,{simAmount:t,activeStrat:a,stratAVal:n.value,stratBVal:l.value,onSelectChange:this.handleAmountSelect,onRadioChange:this.handleStratSelect,onValueChange:this.handleStratValChange}),g=s.a.createElement(I,{activeStrat:a,stratValue:this.state[a].value,completed:c,avgStreak:u,avgWinnings:m,bestStreak:h,bestWinnings:d});return s.a.createElement("div",null,s.a.createElement("div",{className:"ps-margin"},s.a.createElement($,{value:o,completed:c}),r||i||c?g:v),s.a.createElement(T,{running:r,paused:i,completed:c,onPlay:this.handlePlayPause,onStop:this.handleStop,onNew:this.handleNew}),s.a.createElement("div",{className:"ps-action-bar-padding"}))}}]),t}(n.Component);a(26);function Q(e){return s.a.createElement("div",null,s.a.createElement("div",{className:"ps-margin"},s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column content"},s.a.createElement("h3",null,"Game Rules"),s.a.createElement("p",null,"You start with no money in the money bag, and on every turn you have two choices: quit and take home your winnings, or risk everything in the money bag and roll a die."),s.a.createElement("p",null,"If the die lands on 1, you lose all the money in your money bag, but if the die lands on anything else, you add the value in dollars to your money bag.."),s.a.createElement("h3",null,"Think"),s.a.createElement("p",null,"What would be the optimal strategy for making the most money on average?")))),s.a.createElement("footer",{class:"footer"},s.a.createElement("div",{class:"content has-text-centered"},s.a.createElement("p",null,"Made by ",s.a.createElement("a",{href:"https://slevin.im"},"Slevin Zhang"),".",s.a.createElement("br",null),"The source code is on ",s.a.createElement("a",{href:"https://github.com/s7evinz/piglet-sim"},"GitHub"),"."))))}function Y(e){var t=this,a=e.tabs,n=e.activeIndex;return s.a.createElement("div",{className:"tabs is-centered"},s.a.createElement("ul",null,a.map(function(a,l){var r=W()({"is-active":l===n});return s.a.createElement("li",{key:l,className:r,onClick:e.onTabClick.bind(t,l)},s.a.createElement("a",null,a))})))}var F=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleTabClick=function(e){a.setState({tabIndex:e})},a.state={tabIndex:0},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"renderTabPage",value:function(){var e;switch(this.state.tabIndex){case 1:e=s.a.createElement(z,null);break;case 2:e=s.a.createElement(Q,null);break;default:e=s.a.createElement(B,null)}return e}},{key:"render",value:function(){var e=this.state.tabIndex;return s.a.createElement("div",{className:"App"},s.a.createElement("section",{className:"section"},s.a.createElement("div",{className:"container"},s.a.createElement("h1",{className:"title"},"Piglet Sim"),s.a.createElement("h2",{className:"subtitle"},"What's the best strategy?"))),s.a.createElement(Y,{tabs:["Play","Simulate","Explain"],activeIndex:e,onTabClick:this.handleTabClick}),this.renderTabPage())}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[17,1,2]]]);
//# sourceMappingURL=main.c1a4979e.chunk.js.map